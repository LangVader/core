<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Vader Web Runtime - Demo Nativo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            border-radius: 10px;
            border: 2px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .header h1 {
            color: #ffd700;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
        }
        
        .header p {
            color: #ccc;
            font-size: 1.2em;
        }
        
        .demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .code-panel, .output-panel {
            background: #0d1117;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
        }
        
        .panel-title {
            color: #ffd700;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }
        
        .code-editor {
            width: 100%;
            height: 350px;
            background: #000;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            outline: none;
        }
        
        .output-area {
            background: #000;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            height: 350px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 215, 0, 0.3);
        }
        
        .btn.secondary {
            background: #333;
            color: #ffd700;
            border: 1px solid #ffd700;
        }
        
        .btn.secondary:hover {
            background: #444;
        }
        
        .examples {
            margin-top: 20px;
            text-align: center;
        }
        
        .example-btn {
            background: #2d2d2d;
            color: #ffd700;
            border: 1px solid #444;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .example-btn:hover {
            background: #ffd700;
            color: #000;
        }
        
        .status {
            background: #111;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid #333;
        }
        
        .interactive-output {
            background: #000;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            min-height: 200px;
        }
        
        @media (max-width: 768px) {
            .demo-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🚀 Vader Web Runtime</h1>
        <p>El Primer Intérprete Web Nativo para Programación en Español</p>
        <p style="font-size: 0.9em; margin-top: 10px; color: #999;">
            ¡Ejecuta código Vader directamente en tu navegador sin transpilación!
        </p>
    </div>

    <div class="demo-container">
        <div class="code-panel">
            <div class="panel-title">📝 Editor de Código Vader</div>
            <textarea id="codeEditor" class="code-editor" placeholder="Escribe tu código Vader aquí..."># ¡Bienvenido al Vader Web Runtime! 🌐
# Este código se ejecuta NATIVAMENTE en tu browser

mostrar "🎉 ¡Hola desde Vader Web!"
mostrar "Ejecutándose nativamente en el navegador"
mostrar ""

# Variables y operaciones
nombre = "Vader Web"
version = 1.0
mostrar "Runtime: " + nombre
mostrar "Versión: " + version

# Crear elementos web interactivos
crear titulo "🌟 Demo Interactivo"
crear boton "¡Hacer Click!" al hacer click mostrar "¡Botón presionado desde Vader!"

# Matemáticas nativas
numero1 = 10
numero2 = 5
resultado = numero1 + numero2
mostrar "Cálculo: " + numero1 + " + " + numero2 + " = " + resultado

# Condicionales
si resultado es mayor que 12
    mostrar "✅ El resultado es mayor que 12"
sino
    mostrar "❌ El resultado es menor o igual a 12"
fin si

# Bucle nativo
mostrar ""
mostrar "🔄 Contador web:"
repetir 3 veces
    mostrar "• Vader ejecutándose en el browser..."
fin repetir

# Función web
funcion saludo_web
    mostrar ""
    mostrar "🌐 ¡Vader Web Runtime funcionando perfectamente!"
    mostrar "🚀 Sin transpilación, sin dependencias"
    mostrar "💫 Solo Vader puro en tu navegador"
fin funcion

saludo_web

mostrar ""
mostrar "✅ Demo completada - ¡Vader es ahora un lenguaje web nativo!"</textarea>
            
            <div class="controls">
                <button class="btn" onclick="executeVaderCode()">🚀 Ejecutar Vader</button>
                <button class="btn secondary" onclick="clearOutput()">🧹 Limpiar</button>
                <button class="btn secondary" onclick="clearAll()">🔄 Reiniciar</button>
            </div>
            
            <div class="examples">
                <div style="color: #ffd700; margin-bottom: 10px; font-weight: bold;">📚 Ejemplos:</div>
                <button class="example-btn" onclick="loadExample('calculadora')">Calculadora</button>
                <button class="example-btn" onclick="loadExample('interactivo')">Web Interactivo</button>
                <button class="example-btn" onclick="loadExample('juego')">Mini Juego</button>
                <button class="example-btn" onclick="loadExample('formulario')">Formulario</button>
            </div>
        </div>

        <div class="output-panel">
            <div class="panel-title">👁️ Salida del Programa</div>
            <div id="output" class="output-area">
                <div style="color: #ffd700;">🌟 Vader Web Runtime Listo</div>
                <div style="color: #ccc; margin-top: 5px;">Presiona "🚀 Ejecutar Vader" para ver la magia...</div>
            </div>
            
            <div class="interactive-output" id="interactiveOutput">
                <div style="color: #ffd700; font-weight: bold; margin-bottom: 10px;">🎮 Área Interactiva</div>
                <div style="color: #999; font-size: 12px;">Los elementos web creados por Vader aparecerán aquí</div>
            </div>
        </div>
    </div>

    <div class="status" id="status">
        ⚡ Vader Web Runtime v1.0 - Listo para ejecutar código nativo
    </div>

    <!-- Cargar el runtime de Vader -->
    <script src="vader-runtime.js"></script>

    <script>
        let vaderRuntime;

        // Inicializar runtime al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            initializeRuntime();
        });

        function initializeRuntime() {
            vaderRuntime = new VaderWebRuntime();
            vaderRuntime.debugMode = false;
            
            // Configurar elementos de salida
            const outputElement = document.getElementById('output');
            const interactiveElement = document.getElementById('interactiveOutput');
            
            // Crear un contenedor combinado
            const combinedOutput = {
                innerHTML: '',
                scrollTop: 0,
                scrollHeight: 0,
                appendChild: (element) => {
                    interactiveElement.appendChild(element);
                }
            };
            
            // Override del método output para manejar ambos elementos
            const originalOutput = vaderRuntime.output.bind(vaderRuntime);
            vaderRuntime.output = (message) => {
                outputElement.innerHTML += String(message) + '<br>';
                outputElement.scrollTop = outputElement.scrollHeight;
            };
            
            vaderRuntime.setOutputElement(combinedOutput);
            
            // Configurar input callback
            vaderRuntime.setInputCallback(async (prompt) => {
                const userInput = prompt(prompt || 'Ingrese un valor:');
                return userInput || '';
            });
            
            updateStatus('✅ Runtime inicializado correctamente');
        }

        async function executeVaderCode() {
            const code = document.getElementById('codeEditor').value;
            if (!code.trim()) {
                updateStatus('❌ No hay código para ejecutar');
                return;
            }

            updateStatus('🚀 Ejecutando código Vader...');
            
            try {
                const success = await vaderRuntime.executeCode(code, 'demo.vdr');
                if (success) {
                    updateStatus('✅ Código ejecutado exitosamente');
                } else {
                    updateStatus('❌ Error durante la ejecución');
                }
            } catch (error) {
                updateStatus('❌ Error: ' + error.message);
                console.error('Error ejecutando Vader:', error);
            }
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = 
                '<div style="color: #ffd700;">🌟 Salida limpiada</div>';
            document.getElementById('interactiveOutput').innerHTML = 
                '<div style="color: #ffd700; font-weight: bold; margin-bottom: 10px;">🎮 Área Interactiva</div>' +
                '<div style="color: #999; font-size: 12px;">Los elementos web creados por Vader aparecerán aquí</div>';
            updateStatus('🧹 Salida limpiada');
        }

        function clearAll() {
            clearOutput();
            if (vaderRuntime) {
                vaderRuntime.clear();
            }
            updateStatus('🔄 Runtime reiniciado');
        }

        function updateStatus(message) {
            document.getElementById('status').textContent = message;
        }

        function loadExample(type) {
            const examples = {
                calculadora: `# Calculadora Web Nativa en Vader
mostrar "🧮 Calculadora Web de Vader"
mostrar "=========================="

# Solicitar números (simulado para demo)
num1 = 15
num2 = 7
mostrar "Número 1: " + num1
mostrar "Número 2: " + num2

# Operaciones
suma = num1 + num2
resta = num1 - num2
multiplicacion = num1 * num2
division = num1 / num2

mostrar ""
mostrar "📊 Resultados:"
mostrar "Suma: " + suma
mostrar "Resta: " + resta
mostrar "Multiplicación: " + multiplicacion
mostrar "División: " + division

si suma es mayor que 20
    mostrar "✅ La suma es mayor que 20"
fin si`,

                interactivo: `# Demo Web Interactivo
crear titulo "🎮 Vader Web Interactivo"
mostrar "Creando elementos web nativos..."

crear boton "Saludar" al hacer click mostrar "¡Hola desde Vader Web!"
crear boton "Calcular" al hacer click mostrar "2 + 2 = 4"
crear boton "Hora" al hacer click mostrar "Ejecutado en tiempo real"

mostrar ""
mostrar "🌟 Elementos creados dinámicamente"
mostrar "Haz click en los botones de arriba ⬆️"

# Contador interactivo
contador = 0
repetir 5 veces
    contador = contador + 1
    mostrar "Contador: " + contador
fin repetir`,

                juego: `# Mini Juego en Vader Web
crear titulo "🎯 Adivina el Número"
mostrar "¡Bienvenido al juego de Vader!"

# Número secreto (fijo para demo)
numero_secreto = 7
intento = 5

mostrar "He pensado un número entre 1 y 10"
mostrar "Tu intento: " + intento

si intento es igual a numero_secreto
    mostrar "🎉 ¡GANASTE! Era el " + numero_secreto
    crear boton "¡Jugar de nuevo!" al hacer click mostrar "¡Nuevo juego iniciado!"
sino
    mostrar "❌ No es correcto. Era el " + numero_secreto
    crear boton "Intentar otra vez" al hacer click mostrar "¡Suerte en el próximo!"
fin si

mostrar ""
mostrar "🏆 Juego completado en Vader nativo"`,

                formulario: `# Formulario Web Dinámico
crear titulo "📝 Formulario Vader"
mostrar "Creando formulario interactivo..."

# Datos del usuario (simulados)
nombre_usuario = "Usuario Demo"
edad = 25
email = "demo@vader.com"

mostrar "👤 Datos del formulario:"
mostrar "Nombre: " + nombre_usuario
mostrar "Edad: " + edad
mostrar "Email: " + email

# Validaciones
si edad es mayor que 18
    mostrar "✅ Usuario mayor de edad"
    crear boton "Enviar Formulario" al hacer click mostrar "📧 Formulario enviado correctamente"
sino
    mostrar "❌ Usuario menor de edad"
    crear boton "Formulario Bloqueado" al hacer click mostrar "⚠️ Acceso denegado"
fin si

mostrar ""
mostrar "🔒 Validación completada en Vader"`
            };

            if (examples[type]) {
                document.getElementById('codeEditor').value = examples[type];
                updateStatus(`📚 Ejemplo "${type}" cargado`);
            }
        }

        // Mensaje de bienvenida
        console.log('🚀 Vader Web Runtime Demo cargado');
        console.log('🌟 El primer lenguaje web nativo en español del mundo');
    </script>
</body>
</html>
