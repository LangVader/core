<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Prueba Vader Gaming Runtime</title>
    <style>
        body {
            background: #000011;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            text-align: center;
            padding: 20px;
        }
        canvas {
            border: 3px solid #FFD700;
            background: #000;
        }
        .controls {
            margin: 20px;
        }
        .btn {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
        }
        .output {
            background: #000;
            border: 1px solid #FFD700;
            padding: 15px;
            margin: 20px auto;
            max-width: 600px;
            height: 200px;
            overflow-y: auto;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>üéÆ VADER GAMING RUNTIME - PRUEBA COMPLETA</h1>
    <p>Usa las flechas para mover, mouse para interactuar</p>
    
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <div class="controls">
        <button class="btn" onclick="startDemo()">üöÄ Iniciar Demo</button>
        <button class="btn" onclick="testCollision()">üí• Probar Colisi√≥n</button>
        <button class="btn" onclick="testSound()">üîä Probar Sonido</button>
        <button class="btn" onclick="resetGame()">üîÑ Reset</button>
    </div>
    
    <div class="output" id="output">
        <div style="color: #00FF00;">üéÆ Vader Gaming Runtime listo para pruebas...</div>
    </div>
    
    <script src="vader-gaming.js"></script>
    <script>
        let gamingRuntime;
        
        function initRuntime() {
            try {
                gamingRuntime = new VaderGamingRuntime('gameCanvas');
                addOutput('‚úÖ Gaming Runtime inicializado correctamente');
            } catch (error) {
                addOutput(`‚ùå Error inicializando runtime: ${error.message}`);
            }
        }
        
        function addOutput(message) {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            div.style.color = '#FFD700';
            div.style.marginBottom = '5px';
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
        }
        
        async function startDemo() {
            addOutput('üöÄ Iniciando demo completo...');
            
            const demoCode = `
limpiar pantalla
dibujar texto "VADER GAMING DEMO" en x=250 y=50 tama√±o=32 color="dorado"

crear sprite "jugador" en x=100 y=300 ancho=50 alto=50 color="azul"
crear sprite "enemigo" en x=600 y=300 ancho=40 alto=40 color="rojo"
crear sprite "moneda" en x=400 y=200 ancho=30 alto=30 color="amarillo"

dibujar texto "Usa flechas para mover" en x=10 y=100 tama√±o=16 color="blanco"
dibujar texto "Puntaje: 0" en x=10 y=10 tama√±o=20 color="blanco"

iniciar juego
            `;
            
            try {
                await gamingRuntime.executeCode(demoCode);
                addOutput('‚úÖ Demo iniciado - Usa las flechas para mover');
            } catch (error) {
                addOutput(`‚ùå Error en demo: ${error.message}`);
            }
        }
        
        async function testCollision() {
            addOutput('üí• Probando sistema de colisiones...');
            
            const collisionCode = `
detectar colision entre "jugador" y "enemigo"
si colision_detectada
    mostrar "¬°Colisi√≥n detectada!"
    reproducir sonido "explosion"
    aumentar puntaje 10
sino
    mostrar "Sin colisi√≥n"
fin si
            `;
            
            try {
                await gamingRuntime.executeCode(collisionCode);
                addOutput('‚úÖ Sistema de colisiones probado');
            } catch (error) {
                addOutput(`‚ùå Error en colisiones: ${error.message}`);
            }
        }
        
        async function testSound() {
            addOutput('üîä Probando sistema de sonido...');
            
            const soundCode = `
reproducir sonido "salto"
reproducir sonido "moneda"
mostrar "Sonidos reproducidos"
            `;
            
            try {
                await gamingRuntime.executeCode(soundCode);
                addOutput('‚úÖ Sistema de sonido probado');
            } catch (error) {
                addOutput(`‚ùå Error en sonido: ${error.message}`);
            }
        }
        
        function resetGame() {
            addOutput('üîÑ Reseteando juego...');
            try {
                gamingRuntime.pauseGame();
                gamingRuntime.clearScreen();
                addOutput('‚úÖ Juego reseteado');
            } catch (error) {
                addOutput(`‚ùå Error reseteando: ${error.message}`);
            }
        }
        
        // Inicializar al cargar
        document.addEventListener('DOMContentLoaded', function() {
            initRuntime();
        });
        
        // Controles de teclado para testing
        document.addEventListener('keydown', function(e) {
            if (gamingRuntime) {
                const moveCode = `
si tecla "${e.code}" presionada entonces mover sprite "jugador" x=${e.code === 'ArrowLeft' ? -10 : e.code === 'ArrowRight' ? 10 : 0} y=${e.code === 'ArrowUp' ? -10 : e.code === 'ArrowDown' ? 10 : 0}
                `;
                
                if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(e.code)) {
                    gamingRuntime.executeCode(moveCode);
                    addOutput(`üéÆ Movimiento: ${e.code}`);
                }
            }
        });
    </script>
</body>
</html>
